(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{438:function(s,a,n){"use strict";n.r(a);var e=n(17),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("在有网的情况下，全局安装pm2只需要")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g pm2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("而公司的部署环境不能访问公网，想要从npm仓库安装全局依赖无法实现，只能采用离线包安装的方式，以下为pm2离线包安装的记录。")]),s._v(" "),n("h2",{attrs:{id:"准备离线包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#准备离线包"}},[s._v("#")]),s._v(" 准备离线包")]),s._v(" "),n("p",[s._v("找一台有网的电脑，如果没安装过pm2，则全局安装一下")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g pm2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("查找npm默认全局安装目录")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get prefix\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("假设默认全局安装目录为C:\\Users\\Administrator\\AppData\\Roaming\\npm")]),s._v(" "),n("ul",[n("li",[s._v("进入npm默认全局安装目录下的node_modules")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" C:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Administrator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("AppData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Roaming"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("npm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("压缩pm2")])]),s._v(" "),n("p",[s._v("如果是要在windows中使用的离线包，直接使用压缩包软件压缩，如果是linux，可以使用以下命令:")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" czvf pm2.tar.gz pm2/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("此时会生成一个pm2的tar.gz压缩包")]),s._v(" "),n("h2",{attrs:{id:"部署到服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署到服务器"}},[s._v("#")]),s._v(" 部署到服务器")]),s._v(" "),n("ul",[n("li",[s._v("windows")])]),s._v(" "),n("p",[s._v("查找npm默认全局安装目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get prefix\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("假设默认全局安装目录为C:\\Users\\Administrator\\AppData\\Roaming\\npm，如果目录下没有node_modules，则新建一个node_modules文件夹，")]),s._v(" "),n("p",[s._v("进入C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules，将pm2压缩包拷贝此处，并解压")]),s._v(" "),n("p",[s._v("为了在系统环境中使用pm2命令，还需要在C:\\Users\\Administrator\\AppData\\Roaming\\npm中增加pm2的脚本，此脚本可在之前有网电脑的全局安装目录C:\\Users\\Administrator\\AppData\\Roaming\\npm下拷贝")]),s._v(" "),n("p",[s._v("到此为止，pm2全局离线包安装完成，可在终端输入以下命令测试")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("pm2 list\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("linux")])]),s._v(" "),n("p",[s._v("查找npm默认全局安装目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config get prefix\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("假如安装路径为/home/mss/node/node-v12.16.1-linux-x64，进入以下目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/mss/node/node-v12.16.1-linux-x64/lib/node_modules\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("上传pm2压缩包到此文件夹，并解压")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("tar xvf pm2.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("建立软连接")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" –s /home/mss/node/node-v12.16.1-linux-x64/lib/node_modules/pm2/bin/pm2 /usr/local/bin/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("此时离线包已安装完成，可在系统中使用pm2命令")])])}),[],!1,null,null,null);a.default=t.exports}}]);